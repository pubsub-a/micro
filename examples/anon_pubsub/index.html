<!DOCTYPE html>
<html>
<head>
    <script src="/dist/pubsub-a-micro.js"></script>

    <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {

        var myObject = {};

        // adds a .publish and .subscribe function to the object so we don't need any
        // string topics
        PubSubMicro.includeIn(myObject);

        // no .start() required for local usage...
        var subscription = myObject.subscribe(function(message) {
            var div = document.createElement('div');
            div.appendChild(document.createTextNode('Received message: ' + message));
            document.body.appendChild(div);
        });

        setTimeout(function() {
            myObject.publish('Hello, ');
        }, 1000);

        setTimeout(function() {
            myObject.publish('World!');
        }, 2000);

        setTimeout(function() {
            myObject.publish('I am PubSubA !');

            // last message, unsubscribe (cleanup)
            subscription.dispose();
        }, 3000);
    });
    </script>
</head>

<body>
</body>
</html>
