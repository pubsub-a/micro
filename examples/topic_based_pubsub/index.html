<!DOCTYPE html>
<html>
<head>
    <script src="/examples/jquery.min.js"></script>
    <script src="/dist/pubsub-micro.js"></script>
    
    <script type="text/javascript">
    $(document).ready(function() {
        var pubsub = PubSubA.create('local');
        var channel = pubsub.channel('exampleChannel');

        // no .start() required for local usage...
        var subscription = channel.subscribe('someTopic', function(message) {
            var div = $('<div>').text('Received message: ' + message);
            $('body').append(div);
        });

        setTimeout(function() {
            channel.publish('someTopic', 'Hello, ');
        }, 1000);

        setTimeout(function() {
            channel.publish('someTopic', 'World!');
        }, 2000);

        setTimeout(function() {
            channel.publish('someTopic', 'I am PubSubA !');

            // last message, unsubscribe (cleanup)
            subscription.dispose();
        }, 3000);
    });
    </script>
</head>

<body>
</body>
</html>
