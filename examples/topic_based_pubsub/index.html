<!DOCTYPE html>
<html>
<head>
    <script src="/dist/pubsub-a-micro.js"></script>

    <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        var pubsub = new PubSubMicro();
        var channel = pubsub.channel('exampleChannel');

        // no .start() required for local usage...
        var subscription = channel.subscribe('someTopic', function(message) {
            var div = document.createElement('div');
            div.appendChild(document.createTextNode('Received message: ' + message));
            document.body.appendChild(div);
        });

        setTimeout(function() {
            channel.publish('someTopic', 'Hello, ');
        }, 1000);

        setTimeout(function() {
            channel.publish('someTopic', 'World!');
        }, 2000);

        setTimeout(function() {
            channel.publish('someTopic', 'I am PubSubA !');

            // last message, unsubscribe (cleanup)
            subscription.dispose();
        }, 3000);
    });
    </script>
</head>

<body>
</body>
</html>
